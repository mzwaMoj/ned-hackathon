
<begin crs message spec metadata>

# Database Schema Information

## Database Details
- **Database**: SQL Server (master)
- **Schema**: dbo

## Table 3: CRS_GH_MessageSpec
This table stores the crucial **header and reporting entity information** for **Common Reporting Standard (CRS) messages originating from Ghana**. It serves as the foundational record for each CRS report, containing metadata about the submission itself and the reporting financial institution. Each record represents a single CRS XML file or logical message submission.

### Table Structure
**Full Name**: [DATA].[CRS_GH_MessageSpec]
**Primary Key**: ParentID

### Column Definitions

**ParentID** (varchar(255))
- Description: A **globally unique identifier for the entire CRS message**. This serves as the primary key for this table and the parent key for related account reports, ensuring message-level traceability.
- Examples: `110121c2-6227-4433-a802-54c0ed699405`, `f8a49cc7-a56f-4a14-a559-367ceff95ca6`
- Rules: **Mandatory**. Must be unique across all CRS messages.

**version** (varchar(255))
- Description: The **version of the CRS XML schema** that was used to generate this specific message. This indicates the technical standard followed for the report (e.g., "1.0", "2.0").
- Examples: `1.0`, `2.0`
- Rules: **Mandatory**. Reflects the current or applicable CRS schema standard.

**SendingCompanyIN** (varchar(255))
- Description: The **Tax Identification Number (TIN) or other official identification number of the financial institution or entity sending** this CRS report. This uniquely identifies the sender.
- Examples: `GHSENDER123`, `ABCBANKGH`
- Rules: **Mandatory**. Unique identifier for the sending financial institution.

**TransmittingCountry** (nvarchar(2))
- Description: The **ISO 3166-1 alpha-2 two-letter country code of the jurisdiction from which this CRS message is being transmitted**. For Ghana-specific reports, this would typically be `GH`.
- Examples: `GH`
- Rules: **Mandatory**. Must be a valid ISO 2-letter country code and exist in `[Ref].[CRS_CountryCode]`.

**ReceivingCountry** (nvarchar(2))
- Description: The **ISO 3166-1 alpha-2 two-letter country code of the jurisdiction to which this CRS message is being sent**. For Ghana's domestic reporting, this would typically be `GH`. If exchanging internationally, this would be the partner jurisdiction's code.
- Examples: `GH`, `US`
- Rules: **Mandatory**. Must be a valid ISO 2-letter country code and exist in `[Ref].[CRS_CountryCode]`.

**MessageType** (varchar(255))
- Description: Defines the **overall type of the CRS message**, indicating its primary purpose.
- Valid Values: `CRS701` (Original Submission), `CRS702` (Corrected Submission), `CRS703` (Void/Deletion of Previous Submission)
- Examples: `CRS701`, `CRS702`
- Rules: **Mandatory**. Specifies the purpose and context of the entire message transmission.

**MessageRefId** (varchar(255))
- Description: A **unique reference identifier for the message itself**, typically generated by the sending financial institution. This allows for specific referencing and tracking of the transmitted file.
- Examples: `MSGREFID-2024-GH-001`, `MSGREFID-ABC-2024-002`
- Rules: **Mandatory**. Must be unique for each entire message transmission and formatted according to jurisdiction-specific guidelines (e.g., [Reporting FI TIN].[Unique ID]).

**MessageTypeIndic** (varchar(255))
- Description: Provides **further indication of the message's content type**, specifically if the data is new or being resent. This is distinct from `MessageType` which defines the overall intent (Original, Corrected, Void).
- Valid Values: `CRS801` (New Data), `CRS802` (Resent Data)
- Examples: `CRS801`, `CRS802`
- Rules: **Mandatory** from CRS XML Schema v2.0 onwards. Offers additional detail about the nature of the data included in the message. Must be consistent with `MessageType` (e.g., `CRS701` usually pairs with `CRS801`).

**ReportingPeriod** (varchar(10))
- Description: The **tax year or specific reporting period** (end date) for which the CRS report is being submitted. This identifies the fiscal context of the data within the message.
- Examples: `2023-12-31`, `2024-12-31`
- Rules: **Mandatory**. Expected to be in `YYYY-MM-DD` format.

**Timestamp** (varchar(255))
- Description: The exact **date and time when the CRS message was created and prepared for submission**. This provides a precise record of the message generation time, essential for audit trails.
- Examples: `2024-06-15T10:30:00Z`, `2024-07-01T14:45:00.123Z`
- Rules: **Mandatory**. Follows the **ISO 8601 format** (e.g., `YYYY-MM-DDThh:mm:ssZ` or `YYYY-MM-DDThh:mm:ss.nnnZ`), including timezone information (e.g., `Z` for UTC). Fractions of seconds are allowed.

**ResCountryCode** (nvarchar(2))
- Description: The **ISO 3166-1 alpha-2 two-letter country code of residence for the reporting entity** (the financial institution) for tax purposes.
- Examples: `GH`, `US`
- Rules: **Mandatory**. Must be a valid ISO 2-letter country code and exist in `[Ref].[CRS_CountryCode]`.

**TIN** (varchar(255))
- Description: The **Tax Identification Number (TIN) of the reporting financial institution** itself. This is the primary identification for the legal entity submitting the report.
- Examples: `GHFI1234567`, `USFIN123456`
- Rules: **Mandatory**. Unique identification for the reporting entity.

**issuedBy** (nvarchar(2))
- Description: The **ISO 3166-1 alpha-2 two-letter country code of the authority that issued the reporting entity's TIN**.
- Examples: `GH`, `US`
- Rules: **Mandatory**. Must be a valid ISO 2-letter country code and exist in `[Ref].[CRS_CountryCode]`.

**Name** (varchar(255))
- Description: The **full legal name of the reporting financial institution**. This is the official registered name of the entity responsible for the CRS submission.
- Examples: `Bank of Ghana`, `ABC Financial Services Ltd.`
- Rules: **Mandatory**. The official, registered name of the reporting entity.

**CountryCode** (nvarchar(2))
- Description: The **ISO 3166-1 alpha-2 two-letter country code of the reporting entity's official address**.
- Examples: `GH`, `GB`
- Rules: **Mandatory**. Must be a valid ISO 2-letter country code and exist in `[Ref].[CRS_CountryCode]`.

**AddressFree** (varchar(255))
- Description: A **free-text field containing the complete postal address of the reporting entity**. This typically includes street, building number, city, postal code, and any other relevant address lines for comprehensive identification.
- Examples: `1 Financial Centre, Accra, Ghana; PO Box 123, London, UK`
- Rules: **Mandatory**. Contains the full, formatted postal address.

**DocTypeIndic** (varchar(255))
- Description: The **document type indicator for the message document itself**, specifying if it's an original transmission, a correction to a previous message, or a voiding of a previous message. This relates to the file being sent.
- Valid Values: `OECD1` (Original Transmitting Data), `OECD2` (Correcting Transmitting Data), `OECD3` (Voiding Transmitting Data)
- Examples: `OECD1`
- Rules: **Mandatory**. Adheres to OECD CRS XML schema document type indicators for the message level. Must be consistent with `MessageType`.

**DocRefId** (varchar(255))
- Description: A **unique reference ID for this specific message document or file**. This allows for precise identification of the XML file submission itself.
- Examples: `MSGDOCREFID-2024-GH-A`, `MSGDOCREFID-ABC-2024-B`
- Rules: **Mandatory**. Must be unique for the message document and ideally follow jurisdictional naming conventions.

**Processed** (bit)
- Description: A **boolean flag** (0 for False, 1 for True) indicating whether this CRS message has been successfully **processed and submitted** to the relevant tax authority. This is typically an internal status flag used by the financial institution.
- Valid Values: `0` (False), `1` (True)
- Examples: `0`, `1`
- Rules: **Optional**. Defaults to `0` (False) if not explicitly set. Used for internal tracking of message processing and submission status.

### Key Relationships & Rules

- **Hierarchical Relationship**: `[DATA].[CRS_GH_MessageSpec].[ParentID]` is the primary key for the message header and acts as a foreign key for the `[DATA].[CRS_GH_AccountReport].[ParentID]` column, establishing a parent-child relationship for all accounts reported within a given message.
- **Country Code Referencing**: `TransmittingCountry`, `ReceivingCountry`, `ResCountryCode`, `issuedBy`, and `CountryCode` fields must all correspond to valid `CountryShortCode` entries in the `[Ref].[CRS_CountryCode]` table, ensuring data consistency and validity across the schema.
- **Timestamp Accuracy**: The `Timestamp` should accurately reflect the moment the message was generated, crucial for audit trails and regulatory compliance.
- **Message Type Consistency**: The `MessageType`, `MessageTypeIndic`, and `DocTypeIndic` fields should logically align to correctly represent the nature of the submitted data (e.g., an "Original Submission" message should contain "New Data" document types).

</end crs message spec metadata>
